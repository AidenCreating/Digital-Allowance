<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Allowance</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500;600;700&family=Quicksand:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="bg-shape bg-shape-one"></div>
    <div class="bg-shape bg-shape-two"></div>

    <main class="app-shell">
      <header class="hero">
        <h1>Digital Allowance</h1>
        <p>Earn coins, shop smart, and keep family allowance fun.</p>
      </header>

      <section id="authSection" class="panel auth-panel">
        <h2>Sign In</h2>
        <div class="auth-grid">
          <form id="parentLoginForm" class="card auth-card">
            <h3>Parent Sign In</h3>
            <label for="parentPin">Parent PIN</label>
            <input id="parentPin" type="password" required minlength="4" />
            <button type="submit">Open Parent Portal</button>
            <button type="button" id="openParentSignupBtn" class="ghost-btn">Parent Sign Up</button>
          </form>

          <form id="childLoginForm" class="card auth-card">
            <h3>Child Sign In</h3>
            <label for="childPin">Child PIN</label>
            <input id="childPin" type="password" required minlength="4" />
            <button type="submit">Open Child Portal</button>
            <small>Child accounts are created by a parent.</small>
          </form>
        </div>

        <form id="parentSignupForm" class="card auth-card hidden auth-signup-card">
          <h3>Create Parent Account</h3>
          <label for="newParentPin">New Parent PIN</label>
          <input id="newParentPin" type="password" minlength="4" required />
          <label for="newParentPinConfirm">Confirm PIN</label>
          <input id="newParentPinConfirm" type="password" minlength="4" required />
          <div class="inline-actions">
            <button type="submit">Create Parent Account</button>
            <button type="button" id="cancelParentSignupBtn" class="ghost-btn">Cancel</button>
          </div>
        </form>
      </section>

      <section id="parentPortal" class="panel hidden">
        <div class="section-title-row">
          <h2>Parent Portal</h2>
          <button id="parentLogoutBtn" class="ghost-btn">Sign Out</button>
        </div>

        <div class="summary-card">
          <h3>Selected Child</h3>
          <label for="parentChildSelect">Choose Child</label>
          <select id="parentChildSelect"></select>
          <h3>Balance</h3>
          <p id="parentBalance" class="balance-value">0 Coins</p>
          <p class="balance-subtext">1 coin = $1.00</p>
        </div>

        <article class="card">
          <h3>Manage Children</h3>
          <form id="childCreateForm" class="inventory-form">
            <input id="childName" type="text" placeholder="Child name" required />
            <input id="childNewPin" type="password" minlength="4" placeholder="Child PIN" required />
            <button type="submit">Add Child</button>
          </form>
          <div id="childList" class="inventory-list"></div>
        </article>

        <div class="grid-2">
          <article class="card">
            <h3>Allowance Scheduler</h3>
            <form id="scheduleForm" class="stack">
              <label for="scheduleStart">Start Date & Time</label>
              <input id="scheduleStart" type="datetime-local" required />

              <label for="scheduleFrequency">Frequency</label>
              <select id="scheduleFrequency">
                <option value="weekly">Weekly</option>
                <option value="biweekly">Every 2 Weeks</option>
                <option value="monthly">Monthly</option>
              </select>

              <label for="scheduleAmount">Coins Per Payout</label>
              <input id="scheduleAmount" type="number" min="1" step="1" required />

              <div class="inline-actions">
                <button type="submit">Save Schedule</button>
                <button type="button" id="runDueNowBtn" class="secondary-btn">Run Due Now</button>
              </div>
            </form>
            <p id="scheduleStatus" class="note-text"></p>
          </article>

          <article class="card">
            <h3>Manual Balance Update</h3>
            <form id="manualForm" class="stack">
              <label for="manualType">Change Type</label>
              <select id="manualType">
                <option value="add">Add Coins</option>
                <option value="subtract">Subtract Coins</option>
              </select>

              <label for="manualAmount">Amount</label>
              <input id="manualAmount" type="number" min="1" step="1" required />

              <label for="manualNote">Note</label>
              <textarea id="manualNote" rows="3" placeholder="Reason for this update" required></textarea>

              <button type="submit">Apply Change</button>
            </form>
          </article>
        </div>

        <article class="card">
          <h3>Allowance Shop Inventory</h3>
          <form id="inventoryForm" class="inventory-form">
            <input id="itemName" type="text" placeholder="Item name" required />
            <input id="itemPrice" type="number" min="1" step="1" placeholder="Price (coins)" required />
            <input id="itemStock" type="number" min="1" step="1" placeholder="Stock" required />
            <button type="submit">Add Item</button>
          </form>
          <div id="inventoryList" class="inventory-list"></div>
        </article>

        <article class="card">
          <h3>Shop Requests From Children</h3>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Child</th>
                  <th>Requested Item</th>
                  <th>Details</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="parentRequestTable"></tbody>
            </table>
          </div>
        </article>

        <article class="card">
          <h3>All Child Activity</h3>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Child</th>
                  <th>Type</th>
                  <th>Amount</th>
                  <th>Details</th>
                </tr>
              </thead>
              <tbody id="activityTable"></tbody>
            </table>
          </div>
        </article>

        <article class="card">
          <h3>Child Purchases (Undo)</h3>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Child</th>
                  <th>Item(s)</th>
                  <th>Coins</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="parentPurchaseTable"></tbody>
            </table>
          </div>
        </article>
      </section>

      <section id="childPortal" class="panel hidden">
        <div class="section-title-row">
          <h2 id="childPortalTitle">Child Portal</h2>
          <button id="childLogoutBtn" class="ghost-btn">Sign Out</button>
        </div>

        <div class="summary-card child-balance-card">
          <h3>Your Coin Balance</h3>
          <p id="childBalance" class="balance-value">0 Coins</p>
        </div>

        <div class="grid-2">
          <article class="card">
            <h3>Allowance Shop</h3>
            <div id="shopGrid" class="shop-grid"></div>
          </article>

          <article class="card">
            <h3>Your Cart</h3>
            <div id="cartList" class="cart-list"></div>
            <div class="cart-footer">
              <p id="cartTotal">Total: 0 Coins</p>
              <button id="checkoutBtn" type="button">Checkout</button>
            </div>
          </article>
        </div>

        <article class="card">
          <h3>Request A Shop Item</h3>
          <form id="requestForm" class="stack">
            <label for="requestItem">Item Name</label>
            <input id="requestItem" type="text" placeholder="What do you want in the shop?" required />
            <label for="requestDetails">Why do you want it?</label>
            <textarea id="requestDetails" rows="3" placeholder="Optional details"></textarea>
            <button type="submit">Send Request</button>
          </form>
          <div id="childRequestList" class="inventory-list"></div>
        </article>

        <article class="card">
          <h3>Past Purchases</h3>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Item(s)</th>
                  <th>Coins Spent</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="purchaseTable"></tbody>
            </table>
          </div>
        </article>
      </section>
    </main>

    <div id="toast" class="toast" aria-live="polite"></div>

    <script src="app.js"></script>
  </body>
</html>
